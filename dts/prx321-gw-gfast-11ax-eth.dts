/dts-v1/;
#include "prx321-gw-11ax-sp.dtsi"

/* Model configuration */
/ {
	model = "PRX321-GW-GFAST-11AX-ETH";
	compatible = "intel,prx321-gw-gfast-11ax-eth", "intel,prx300";

	chosen {
		stdout-path = "serial0";
	};

	memory@0 {
		device_type = "memory";
		reg = <0x20000000 0x40000000>; /* 1024 MB */
	};
};

&ponmbox1 {
	status = "okay";
	resets = <&rcu0 0x10 28>;
	reset-names = "ponip";
	/delete-property/ pinctrl-names;
	/delete-property/ pinctrl-0;
};

/* invert the reset polarity for VRX618 */
&pcie1 {
	reset-gpios = <&gpio0 29 GPIO_ACTIVE_HIGH>;
};

/ {
	aliases {
		i2c0	= &i2c_gpio;
	};

	i2c_gpio: i2c-gpio {
		compatible = "i2c-gpio";
		gpios = <&gpio0 27 GPIO_ACTIVE_HIGH /* sda */
			 &gpio0 26 GPIO_ACTIVE_HIGH /* scl */
			>;
		i2c-gpio,delay-us = <5>;	/* ~100 kHz */
		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_i2c0_gpio>;
		#address-cells = <1>;
		#size-cells = <0>;

		/* EEPROM of the optical WAN transceiver */
		eeprom@50 {
			compatible = "at,24c02";
			reg = <0x50>;
		};
		eeprom@51 {
			compatible = "at,24c02";
			reg = <0x51>;
		};
	};
};

&eth {
	wan: interface@5 {
		compatible = "lantiq,xrx500-pdi";
		#address-cells = <1>;
		#size-cells = <0>;
		reg = <5>;
		lantiq,wan = <1>;
		intel,dp-dev-port = <2>;
		intel,dp-port-id = <2>;
		mac = <&gsw_mac0>;

		ethernet@5 {
			compatible = "lantiq,xrx500-pdi-port";
			reg = <1>;
			phy-mode = "rgmii";
		};
	};
};

&wan_xpcs {
	status = "okay";
	xpcs-mode = <0>;
};

/* use CPU3 for MPE firmware */
&cpu3 {
	default-OS = "MPEFW";
};

&gsw_core {
	intel,gsw-globalpce-rules = <256>;
};

&cqm {
	DQ3: cpu-port3 {
		intel,deq-port = <3 4>;
	};
};
